<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Member Photo Upload</title>
  <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; padding: 24px; background:#5c6b7a; color:#fff; }
    .wrap { max-width: 520px; margin: 0 auto; text-align: center; }
    button { padding: 12px 18px; font-size: 16px; cursor: pointer; }
    #status { margin-top: 16px; font-size: 14px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Upload your profile photo</h1>
    <p>Please, rename your file with your full name.</p>
    <p>Accepted formats: JPG, JPEG, PNG, HEIC</p>
    <button id="upload_widget">Upload Photo</button>
    <div id="status" role="status" aria-live="polite"></div>
  </div>

  <script>
    const widget = cloudinary.createUploadWidget(
      {
        cloudName: "chief-executives-organization", // your cloud name
        uploadPreset: "Member_uploads",             // your unsigned preset
        folder: "home/headshots/Member upload",     // optional, from preset
        tags: ["member-upload"],
        multiple: false,
        clientAllowedFormats: ["jpg","jpeg","png","heic"],
        sources: ["local","camera","url"],
        showCompletedButton: true,
        showUploadMoreButton: false
      },
      (error, result) => {
        const status = document.getElementById("status");
        if (error) {
          console.error(error);
          status.textContent = "Upload failed. Please try again.";
          return;
        }
        if (result && result.event === "success") {
          status.textContent = "Upload successful! You may close this window.";
          setTimeout(() => { 
            window.location.href = "https://www.ceo.org/successful-upload"; 
          }, 1200);
        }
      }
    );

    document.getElementById("upload_widget").addEventListener("click", () => widget.open());
  </script>
</body>
</html>
